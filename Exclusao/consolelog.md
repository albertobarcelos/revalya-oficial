✏️ [AUDIT] Mutação para tenant: Nexsyn Soluções Inteligentes (8d2888f1-64a5-445f-84f5-2614d5160251) useSecureTenantQuery.ts:97:15
✏️ [AUDIT] Atualizando serviço 8226cd62-ca76-4b3a-b781-e3da15ff6ace para tenant: 8d2888f1-64a5-445f-84f5-2614d5160251 
Object { name: "CONTRATO", description: "", code: "458", default_price: 100, tax_rate: 0, tax_code: undefined, lc_code: undefined, municipality_code: undefined, withholding_tax: false, is_active: true }
useServices.ts:259:15
🔍 [DEBUG] Configurando contexto do tenant: 8d2888f1-64a5-445f-84f5-2614d5160251 useServices.ts:262:15
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true, isLoading: false, hasLoaded: true }
useTenantAccessGuard.ts:22:11
🔍 [ServicesPage] Estado de acesso: 
Object { hasAccess: true, accessLoading: false, accessError: null, currentTenant: {…} }
index.tsx:70:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [DEBUG] useSecureTenantQuery - Tenant: 
Object { currentTenant: {…}, isValidTenant: true, queryKey: (3) […], enabled: true }
useSecureTenantQuery.ts:34:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
[2025-09-16T20:42:13.010Z] [DEBUG] 
Object { message: "Render - Estado atual do profile", metadata: {…} }
logger.ts:188:17
[2025-09-16T20:42:13.010Z] [DEBUG] 
Object { message: "Render - Estado atual da session", metadata: {…} }
logger.ts:188:17
✅ [SECURITY] Contexto do tenant configurado: 
Object { message: "Contexto definido com sucesso", success: true, user_id: null, tenant_id: "8d2888f1-64a5-445f-84f5-2614d5160251" }
useServices.ts:274:17
🔍 [DEBUG] Validando serviço - ID: 8226cd62-ca76-4b3a-b781-e3da15ff6ace, TenantID: 8d2888f1-64a5-445f-84f5-2614d5160251 useServices.ts:278:15
🔍 [DEBUG] Resultado da query de validação: 
Object { data: null, error: null, hasData: false, errorMessage: undefined }
useServices.ts:289:15
🚨 [SECURITY] Serviço não encontrado: 
Object { id: "8226cd62-ca76-4b3a-b781-e3da15ff6ace", tenantId: "8d2888f1-64a5-445f-84f5-2614d5160251" }
errorHandler.ts:69:26
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true, isLoading: false, hasLoaded: true }
useTenantAccessGuard.ts:22:11
🔍 [ServicesPage] Estado de acesso: 
Object { hasAccess: true, accessLoading: false, accessError: null, currentTenant: {…} }
index.tsx:70:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [DEBUG] useSecureTenantQuery - Tenant: 
Object { currentTenant: {…}, isValidTenant: true, queryKey: (3) […], enabled: true }
useSecureTenantQuery.ts:34:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
[2025-09-16T20:42:13.423Z] [DEBUG] 
Object { message: "Render - Estado atual do profile", metadata: {…} }
logger.ts:188:17
[2025-09-16T20:42:13.424Z] [DEBUG] 
Object { message: "Render - Estado atual da session", metadata: {…} }
logger.ts:188:17
✏️ [AUDIT] Mutação para tenant: Nexsyn Soluções Inteligentes (8d2888f1-64a5-445f-84f5-2614d5160251) useSecureTenantQuery.ts:97:15
✏️ [AUDIT] Atualizando serviço 8226cd62-ca76-4b3a-b781-e3da15ff6ace para tenant: 8d2888f1-64a5-445f-84f5-2614d5160251 
Object { name: "CONTRATO", description: "", code: "458", default_price: 100, tax_rate: 0, tax_code: undefined, lc_code: undefined, municipality_code: undefined, withholding_tax: false, is_active: true }
useServices.ts:259:15
🔍 [DEBUG] Configurando contexto do tenant: 8d2888f1-64a5-445f-84f5-2614d5160251 useServices.ts:262:15
✅ [SECURITY] Contexto do tenant configurado: 
Object { message: "Contexto definido com sucesso", success: true, user_id: null, tenant_id: "8d2888f1-64a5-445f-84f5-2614d5160251" }
useServices.ts:274:17
🔍 [DEBUG] Validando serviço - ID: 8226cd62-ca76-4b3a-b781-e3da15ff6ace, TenantID: 8d2888f1-64a5-445f-84f5-2614d5160251 useServices.ts:278:15
🔍 [DEBUG] Resultado da query de validação: 
Object { data: {…}, error: null, hasData: true, errorMessage: undefined }
useServices.ts:289:15
✅ [SECURITY] Serviço validado: 
Object { id: "8226cd62-ca76-4b3a-b781-e3da15ff6ace", tenant_id: "8d2888f1-64a5-445f-84f5-2614d5160251", name: "CONTRATO", code: "458" }
useServices.ts:306:15
XHRPATCH
https://wyehpiutzvwplllumgdk.supabase.co/rest/v1/services?id=eq.8226cd62-ca76-4b3a-b781-e3da15ff6ace&tenant_id=eq.8d2888f1-64a5-445f-84f5-2614d5160251&select=*
[HTTP/2 406  92ms]

🚨 [SECURITY] Erro ao atualizar serviço: 
Object { code: "PGRST116", details: "The result contains 0 rows", hint: null, message: "JSON object requested, multiple (or no) rows returned" }
errorHandler.ts:69:26
🚨 [SECURITY] Erro em mutação multi-tenant: 
Object { error: "Erro ao atualizar serviço: JSON object requested, multiple (or no) rows returned", tenant: "8d2888f1-64a5-445f-84f5-2614d5160251" }
errorHandler.ts:69:26
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true, isLoading: false, hasLoaded: true }
useTenantAccessGuard.ts:22:11
🔍 [ServicesPage] Estado de acesso: 
Object { hasAccess: true, accessLoading: false, accessError: null, currentTenant: {…} }
​
accessError: null
​
accessLoading: false
​
currentTenant: Object { id: "8d2888f1-64a5-445f-84f5-2614d5160251", name: "Nexsyn Soluções Inteligentes", slug: "nexsyn", … }
​
hasAccess: true
​
<prototype>: Object { … }
index.tsx:70:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [DEBUG] useSecureTenantQuery - Tenant: 
Object { currentTenant: {…}, isValidTenant: true, queryKey: (3) […], enabled: true }
useSecureTenantQuery.ts:34:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
[2025-09-16T20:42:15.114Z] [DEBUG] 
Object { message: "Render - Estado atual do profile", metadata: {…} }
logger.ts:188:17
[2025-09-16T20:42:15.115Z] [DEBUG] 
Object { message: "Render - Estado atual da session", metadata: {…} }
logger.ts:188:17
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true, isLoading: false, hasLoaded: true }
useTenantAccessGuard.ts:22:11
🔍 [ServicesPage] Estado de acesso: 
Object { hasAccess: true, accessLoading: false, accessError: null, currentTenant: {…} }
index.tsx:70:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [DEBUG] useSecureTenantQuery - Tenant: 
Object { currentTenant: {…}, isValidTenant: true, queryKey: (3) […], enabled: true }
useSecureTenantQuery.ts:34:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
🔍 [TENANT ACCESS GUARD] Verificando acesso: 
Object { currentTenant: {…}, userRole: "ADMIN", requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, roleMatch: true }
useSecureTenantQuery.ts:142:11
[2025-09-16T20:42:15.128Z] [DEBUG] 
Object { message: "Render - Estado atual do profile", metadata: {…} }
logger.ts:188:17
[2025-09-16T20:42:15.128Z] [DEBUG] 
Object { message: "Render - Estado atual da session", metadata: {…} }