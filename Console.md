 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
 [SupabaseProviderSingleton] Nova instância singleton criada
 [DEBUG] App.tsx carregado - URL atual: http://localhost:8081/jaturat/dashboard
 [SupabaseProvider] Contexto atualizado: Object
 ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
warnOnce @ react-router-dom.js?v=9facf328:4285
 ⚠️ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.
warnOnce @ react-router-dom.js?v=9facf328:4285
 [AppInitialization] Lock adquirido: portal-init-1759932327328
 [PortalContext] Inicializando portal: Object
 [PortalContext] Carregando detalhes do tenant: 795b056c-6e95-473f-9c59-b5f4eab973c8
 [PortalContext] Mudança de usuário detectada. ID anterior: null, Novo ID: 5cfb55da-080c-413f-94ed-7545bd0bdc61
 [2025-10-08T14:05:27.328Z] [INFO] Object
 [SupabaseProvider] Instância singleton validada e inicializada com sucesso
 [SupabaseProvider] Iniciando verificação de sessão inicial
 [SupabaseAuthManager] Inicializando gerenciador de autenticação (sem logout automático)...
 [SupabaseAuthManager] Timer de refresh preventivo DESABILITADO - SDK gerencia automaticamente
 [SupabaseAuthManager] Sincronização de headers configurada
 🛡️ Proteções contra erros de extensões inicializadas
 [App] Sistema de limpeza automática de sessões inicializado
 [2025-10-08T14:05:27.330Z] [INFO] Object
 [SupabaseAuthManager] Auth state changed: SIGNED_IN
 [SupabaseAuthManager] Headers do Axios atualizados com novo token
 [SupabaseAuthManager] Limpeza de chaves legadas concluída
 [SupabaseProvider] Auth state changed: SIGNED_IN
 [SupabaseProvider] Headers do Axios sincronizados com novo token
 [SupabaseProvider] Usuário logado
 [SupabaseProvider] Contexto atualizado: Object
 [AppRouter] Debug - User data: Object
 [SupabaseAuthManager] Auth state changed: INITIAL_SESSION
 [SupabaseAuthManager] Headers do Axios atualizados com novo token
 [SupabaseAuthManager] Headers iniciais configurados
 [SupabaseAuthManager] Inicialização concluída
 [SupabaseProvider] Sessão inicial carregada e cacheada com sucesso
 [SupabaseProvider] Contexto atualizado: Object
 [AppRouter] Debug - User data: Object
 [SupabaseProvider] Headers do Axios sincronizados com novo token
 [SupabaseProvider] Contexto atualizado: Object
 [AppRouter] Debug - User data: Object
 [AppInitialization] Lock liberado: portal-init-1759932327328
 [PortalContext] Carregando detalhes do tenant: 795b056c-6e95-473f-9c59-b5f4eab973c8
 🔄 [TenantAutoLoginRouter] Sincronizando tenant com store: Object
 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: Object
 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat undefined
 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat Object
 🔍 [DEBUG] Dashboard Page - Tenant: Object
  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
 Loading notifications...
 🔍 [DEBUG] undefined undefined
 🧹 [CACHE] Limpando cache dashboard para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
 📊 [AUDIT] Buscando métricas do dashboard para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8) Object
 [AUDIT] getDashboardMetrics - Tenant: 795b056c-6e95-473f-9c59-b5f4eab973c8
 Buscando dados a partir de 2025-04-08 (6 meses atrás)
 💰 [AUDIT] Buscando projeção de fluxo de caixa para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8) Object
 [AUDIT] getCashFlowProjection - Tenant: 795b056c-6e95-473f-9c59-b5f4eab973c8
 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
useNotifications.ts:38 Loaded notifications: Array(0)
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
logThrottle.ts:30 🔍 [DEBUG] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
dashboardService.ts:238 🔍 [DEBUG] dashboardService - Total de cobranças carregadas: 1
dashboardService.ts:239 🔍 [DEBUG] dashboardService - Data de hoje para comparação: 2025-10-08
dashboardService.ts:256 🔍 [DEBUG] Cobrança PENDING 1: Object
dashboardService.ts:268 🔍 [DEBUG] Cobrança VENCIDA 1: Object
dashboardService.ts:354 🔍 [DEBUG] dashboardService - Totais finais calculados: Object
dashboardService.ts:362 🔍 [DEBUG] dashboardService - Cobranças OVERDUE encontradas: Array(1)
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
RevenueTrendChart.tsx:48 RevenueTrendChart - Nenhum dado de pagamento disponível
(anonymous) @ RevenueTrendChart.tsx:48
RevenueTrendChart.tsx:149 RevenueTrendChart - Valores para calcular escala: Array(12)
RevenueTrendChart.tsx:152 RevenueTrendChart - Valor máximo encontrado: 0
RevenueTrendChart.tsx:178 RevenueTrendChart - Buscando dados do mês atual: out/2025
RevenueTrendChart.tsx:195 RevenueTrendChart - Mês atual encontrado nos dados: Object
RevenueTrendChart.tsx:33 RevenueTrendChart - dados recebidos (pagamentos): Array(0)
RevenueTrendChart.tsx:34 RevenueTrendChart - dados esperados (vencimentos): Array(1)
RevenueTrendChart.tsx:40 RevenueTrendChart - Dados de março (pagamentos): undefined
RevenueTrendChart.tsx:41 RevenueTrendChart - Dados de março (vencimentos): undefined
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
Dashboard.tsx:119 🔍 [DEBUG] Dashboard Page - Tenant: Object
Dashboard.tsx:204  [AUDIT] Página Dashboard renderizada para tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 30x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat (repetido 6x) undefined
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 20x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
useNotifications.ts:27 Loading notifications...
logThrottle.ts:28 🔍 [DEBUG] undefined (repetido 3x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 9x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 9x) undefined
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {page: 1, limit: 1000}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
Charges.tsx:34 🏢 [AUDIT] Acessando página de cobranças - Tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
Charges.tsx:35 📊 [AUDIT] Aba ativa: dashboard
Charges.tsx:42 🧹 [AUDIT] Limpando cache de cobranças para tenant: jaturat
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {page: 1, limit: 1000}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useNotifications.ts:38 Loaded notifications: []
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
useSecureNotificationTemplates.ts:215 ✅ [AUDIT] Templates carregados - Tenant: jaturat, Count: 6
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 619x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 138x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
chunk-V5FSLQAU.js?v=9facf328:1399 Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.
(anonymous) @ chunk-V5FSLQAU.js?v=9facf328:1399
commitHookEffectListMount @ chunk-F34GCA6J.js?v=9facf328:17159
commitPassiveMountOnFiber @ chunk-F34GCA6J.js?v=9facf328:18437
commitPassiveMountEffects_complete @ chunk-F34GCA6J.js?v=9facf328:18409
commitPassiveMountEffects_begin @ chunk-F34GCA6J.js?v=9facf328:18399
commitPassiveMountEffects @ chunk-F34GCA6J.js?v=9facf328:18389
flushPassiveEffectsImpl @ chunk-F34GCA6J.js?v=9facf328:19772
flushPassiveEffects @ chunk-F34GCA6J.js?v=9facf328:19729
commitRootImpl @ chunk-F34GCA6J.js?v=9facf328:19698
commitRoot @ chunk-F34GCA6J.js?v=9facf328:19559
performSyncWorkOnRoot @ chunk-F34GCA6J.js?v=9facf328:19175
flushSyncCallbacks @ chunk-F34GCA6J.js?v=9facf328:9353
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:18898
BulkMessageDialog.tsx:91 🔍 [PREVIEW QUERY] Iniciando query para cobrança: {chargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', hasAccess: true, selectedChargesCount: 1}
BulkMessageDialog.tsx:128 ✅ [PREVIEW QUERY SUCCESS] Dados carregados com sucesso: {chargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', hasCustomer: true, customerName: 'KLEVERSON SILVA JARA', tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8'}
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 47x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 12x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
cobrancas:1 Blocked aria-hidden on an element because its descendant retained focus. The focus must not be hidden from assistive technology users. Avoid using aria-hidden on a focused element or its ancestor. Consider using the inert attribute instead, which will also prevent focus. For more details, see the aria-hidden section of the WAI-ARIA specification at https://w3c.github.io/aria/#aria-hidden.
Element with focus: <div.mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2#radix-:r1o:-content-template>
Ancestor with aria-hidden: <div.left-[50%] top-[50%] z-50 w-[95vw] max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-hidden !transform sm:max-w-[600px] max-h-[90vh] flex flex-col relative !fixed !left-[50%] !top-[50%] !translate-x-[-50%] !translate-y-[-50%]#radix-:r1a:> <div role=​"dialog" id=​"radix-:​r1a:​" aria-describedby=​"radix-:​r1c:​" aria-labelledby=​"radix-:​r1b:​" data-state=​"open" class=​"left-[50%]​ top-[50%]​ z-50 w-[95vw]​ max-w-md md:​max-w-2xl lg:​max-w-4xl xl:​max-w-6xl translate-x-[-50%]​ translate-y-[-50%]​ gap-4 border bg-background p-4 sm:​p-6 shadow-lg duration-200 data-[state=open]​:​animate-in data-[state=closed]​:​animate-out data-[state=closed]​:​fade-out-0 data-[state=open]​:​fade-in-0 data-[state=closed]​:​zoom-out-95 data-[state=open]​:​zoom-in-95 data-[state=closed]​:​slide-out-to-left-1/​2 data-[state=closed]​:​slide-out-to-top-[48%]​ data-[state=open]​:​slide-in-from-left-1/​2 data-[state=open]​:​slide-in-from-top-[48%]​ rounded-lg overflow-hidden !transform sm:​max-w-[600px]​ max-h-[90vh]​ flex flex-col relative !fixed !left-[50%]​ !top-[50%]​ !translate-x-[-50%]​ !translate-y-[-50%]​" tabindex=​"-1" style=​"pointer-events:​ auto;​" data-aria-hidden=​"true" aria-hidden=​"true">​…​</div>​flex
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: '⚠️ Atenção {cliente.nome}!\r\n\r\nSua cobrança de {cob…mento}\r\n\r\nPrecisando de ajuda é só nos chamar! 🤝', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: ⚠️ Atenção Kleverson!

Sua cobrança de R$ 10.000,00 vence AMANHÃ!

Não deixe para última hora, pague agora mesmo: https://exemplo.com/pagamento

Precisando de ajuda é só nos chamar! 🤝
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: '⚠️ Atenção {cliente.nome}!\r\n\r\nSua cobrança de {cob…mento}\r\n\r\nPrecisando de ajuda é só nos chamar! 🤝', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: ⚠️ Atenção Kleverson!

Sua cobrança de R$ 10.000,00 vence AMANHÃ!

Não deixe para última hora, pague agora mesmo: https://exemplo.com/pagamento

Precisando de ajuda é só nos chamar! 🤝
BulkMessageDialog.tsx:370 🚀 [BULK-MESSAGE-DIALOG] Iniciando handleSendMessage
BulkMessageDialog.tsx:371 📋 [BULK-MESSAGE-DIALOG] Estado atual: {messageMode: 'template', selectedTemplateId: '6bee10bf-1788-429c-a493-d508df608361', customMessage: '...', selectedChargesCount: 1}
BulkMessageDialog.tsx:400 📝 [BULK-MESSAGE-DIALOG] Modo: template, Mensagem: ...
BulkMessageDialog.tsx:403 🎯 [BULK-MESSAGE-DIALOG] Chamando onSendMessages com template: 6bee10bf-1788-429c-a493-d508df608361
ChargesDashboard.tsx:219 🚀 [CHARGES-DASHBOARD] Iniciando envio de mensagens via messageService
ChargesDashboard.tsx:220 📝 [CHARGES-DASHBOARD] Template ID: 6bee10bf-1788-429c-a493-d508df608361
ChargesDashboard.tsx:221 📝 [CHARGES-DASHBOARD] Mensagem customizada: Não
ChargesDashboard.tsx:222 🎯 [CHARGES-DASHBOARD] Cobranças selecionadas: ['0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e']
messageService.ts?t=1759931867983:26 📤 Enviando mensagens: {chargeCount: 1, isCustomMessage: undefined, hasDirectMessage: false, templateId: '6bee10bf-1788-429c-a493-d508df608361'}
edgeFunctionService.ts?t=1759930725307:199 🔄 Tentativa 1/3 - Enviando mensagens em lote...
edgeFunctionService.ts?t=1759930725307:32 🛡️ [SECURITY-INFO] tenant_validation {timestamp: '2025-10-08T14:05:49.233Z', success: true, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantSlug: 'jaturat'}
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 27x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 7x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
edgeFunctionService.ts?t=1759930725307:32 🛡️ [SECURITY-INFO] auth_validation {timestamp: '2025-10-08T14:05:49.248Z', success: true, tokenLength: 871, expiresAt: 1759933396}
edgeFunctionService.ts?t=1759930725307:16 🔍 [AUDIT] Edge Function Call {timestamp: '2025-10-08T14:05:49.248Z', requestId: 'req_1759932349233_f1vv7qvk8', functionName: 'send-bulk-messages', tenant: {…}, payloadSize: 94, …}
edgeFunctionService.ts?t=1759930725307:257 📤 [SECURE] Enviando para Edge Function: {url: 'https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages', chargeCount: 1, templateId: '6bee10bf-1788-429c-a493-d508df608361', hasCustomMessage: false, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', …}
edgeFunctionService.ts?t=1759930725307:133  POST https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages 400 (Bad Request)
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4029
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4050
fulfilled @ @supabase_supabase-js.js?v=9facf328:4002
Promise.then
step @ @supabase_supabase-js.js?v=9facf328:4015
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4017
__awaiter6 @ @supabase_supabase-js.js?v=9facf328:3999
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4040
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1234
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1344
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1302
__awaiter @ @supabase_supabase-js.js?v=9facf328:1284
invoke @ @supabase_supabase-js.js?v=9facf328:1318
callEdgeFunctionWithRetry @ edgeFunctionService.ts?t=1759930725307:133
_executeBulkMessages @ edgeFunctionService.ts?t=1759930725307:266
await in _executeBulkMessages
sendBulkMessages @ edgeFunctionService.ts?t=1759930725307:200
sendBulkMessages @ messageService.ts?t=1759931867983:33
handleSendMessages @ ChargesDashboard.tsx:225
handleSendMessage @ BulkMessageDialog.tsx:404
callCallback2 @ chunk-F34GCA6J.js?v=9facf328:3807
invokeGuardedCallbackDev @ chunk-F34GCA6J.js?v=9facf328:3831
invokeGuardedCallback @ chunk-F34GCA6J.js?v=9facf328:3865
invokeGuardedCallbackAndCatchFirstError @ chunk-F34GCA6J.js?v=9facf328:3868
executeDispatch @ chunk-F34GCA6J.js?v=9facf328:7131
processDispatchQueueItemsInOrder @ chunk-F34GCA6J.js?v=9facf328:7151
processDispatchQueue @ chunk-F34GCA6J.js?v=9facf328:7160
dispatchEventsForPlugins @ chunk-F34GCA6J.js?v=9facf328:7168
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:7291
batchedUpdates$1 @ chunk-F34GCA6J.js?v=9facf328:19193
batchedUpdates @ chunk-F34GCA6J.js?v=9facf328:3712
dispatchEventForPluginEventSystem @ chunk-F34GCA6J.js?v=9facf328:7290
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-F34GCA6J.js?v=9facf328:5415
dispatchEvent @ chunk-F34GCA6J.js?v=9facf328:5409
dispatchDiscreteEvent @ chunk-F34GCA6J.js?v=9facf328:5386
edgeFunctionService.ts?t=1759930725307:142 🔍 [DEBUG] Resposta da Edge Function: {requestId: 'req_1759932349233_f1vv7qvk8', hasError: true, status: 500, statusText: 'Edge Function returned a non-2xx status code', ok: false, …}
edgeFunctionService.ts?t=1759930725307:32 🛡️ [SECURITY-ERROR] edge_function_response {timestamp: '2025-10-08T14:05:49.791Z', success: false, status: 500, statusText: 'Edge Function returned a non-2xx status code', error: 'Edge Function returned a non-2xx status code'}
errorHandler.ts:69 🚨 Erro na Edge Function: {status: 500, statusText: 'Edge Function returned a non-2xx status code', errorMessage: 'Edge Function returned a non-2xx status code', errorText: 'Edge Function returned a non-2xx status code', requestId: 'req_1759932349233_f1vv7qvk8', …}
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts?t=1759930725307:277
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:05:49.791Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts?t=1759930725307:39
_executeBulkMessages @ edgeFunctionService.ts?t=1759930725307:285
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:05:49.792Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts?t=1759930725307:39
_executeBulkMessages @ edgeFunctionService.ts?t=1759930725307:326
errorHandler.ts:69 ❌ Erro no edgeFunctionService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts?t=1759930725307:291:23)
    at async Object.sendBulkMessages (edgeFunctionService.ts?t=1759930725307:200:24)
    at async Object.sendBulkMessages (messageService.ts?t=1759931867983:33:28)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts?t=1759930725307:331
errorHandler.ts:69 ❌ Erro no messageService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts?t=1759930725307:291:23)
    at async Object.sendBulkMessages (edgeFunctionService.ts?t=1759930725307:200:24)
    at async Object.sendBulkMessages (messageService.ts?t=1759931867983:33:28)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
sendBulkMessages @ messageService.ts?t=1759931867983:53
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Erro ao enviar mensagens: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts?t=1759930725307:291:23)
    at async Object.sendBulkMessages (edgeFunctionService.ts?t=1759930725307:200:24)
    at async Object.sendBulkMessages (messageService.ts?t=1759931867983:33:28)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:241
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Stack trace: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759930725307:291:23)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759930725307:200:24)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/messageService.ts?t=1759931867983:33:28)
    at async handleSendMessages (http://localhost:8081/src/components/charges/dashboard/ChargesDashboard.tsx?t=1759931867983:243:28)
    at async handleSendMessage (http://localhost:8081/src/components/charges/BulkMessageDialog.tsx?t=1759926655047:397:17)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:242
ChargesDashboard.tsx:250 🏁 [CHARGES-DASHBOARD] Finalizando processo de envio
BulkMessageDialog.tsx:405 ✅ [BULK-MESSAGE-DIALOG] onSendMessages (template) executado com sucesso
BulkMessageDialog.tsx:415 🎉 [BULK-MESSAGE-DIALOG] Processo concluído, fechando diálogo
BulkMessageDialog.tsx:458 🏁 [BULK-MESSAGE-DIALOG] Finalizando handleSendMessage
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 46x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 11x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat undefined
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:30 🔍 [DEBUG] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 153x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat (repetido 6x) undefined
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 31x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:28 🔍 [DEBUG] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 153x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat (repetido 6x) undefined
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 31x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:28 🔍 [DEBUG] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:10:19.741Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:10:19.742Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
cobrancas:1 Blocked aria-hidden on an element because its descendant retained focus. The focus must not be hidden from assistive technology users. Avoid using aria-hidden on a focused element or its ancestor. Consider using the inert attribute instead, which will also prevent focus. For more details, see the aria-hidden section of the WAI-ARIA specification at https://w3c.github.io/aria/#aria-hidden.
Element with focus: <div.mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2#radix-:r2e:-content-template>
Ancestor with aria-hidden: <div.left-[50%] top-[50%] z-50 w-[95vw] max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-hidden !transform sm:max-w-[600px] max-h-[90vh] flex flex-col relative !fixed !left-[50%] !top-[50%] !translate-x-[-50%] !translate-y-[-50%]#radix-:r1a:> <div role=​"dialog" id=​"radix-:​r1a:​" aria-describedby=​"radix-:​r1c:​" aria-labelledby=​"radix-:​r1b:​" data-state=​"open" class=​"left-[50%]​ top-[50%]​ z-50 w-[95vw]​ max-w-md md:​max-w-2xl lg:​max-w-4xl xl:​max-w-6xl translate-x-[-50%]​ translate-y-[-50%]​ gap-4 border bg-background p-4 sm:​p-6 shadow-lg duration-200 data-[state=open]​:​animate-in data-[state=closed]​:​animate-out data-[state=closed]​:​fade-out-0 data-[state=open]​:​fade-in-0 data-[state=closed]​:​zoom-out-95 data-[state=open]​:​zoom-in-95 data-[state=closed]​:​slide-out-to-left-1/​2 data-[state=closed]​:​slide-out-to-top-[48%]​ data-[state=open]​:​slide-in-from-left-1/​2 data-[state=open]​:​slide-in-from-top-[48%]​ rounded-lg overflow-hidden !transform sm:​max-w-[600px]​ max-h-[90vh]​ flex flex-col relative !fixed !left-[50%]​ !top-[50%]​ !translate-x-[-50%]​ !translate-y-[-50%]​" tabindex=​"-1" style=​"pointer-events:​ auto;​" data-aria-hidden=​"true" aria-hidden=​"true">​…​</div>​flex
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 473x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 95x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'Olá bom dia {cliente.nome}, seu caloteiro!\n\nPage o…sticas.\n\nDesde já agradeço.\n\nPS: Sei onde vc mora', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: Olá bom dia Kleverson, seu caloteiro!

Page o que me deve imediatamente, o valor que vc me deve é de R$ 10.000,00 e preciso urgentemente dele. Se não me pagar tomarei medidas drasticas.

Desde já agradeço.

PS: Sei onde vc mora
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'Olá bom dia {cliente.nome}, seu caloteiro!\n\nPage o…sticas.\n\nDesde já agradeço.\n\nPS: Sei onde vc mora', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: Olá bom dia Kleverson, seu caloteiro!

Page o que me deve imediatamente, o valor que vc me deve é de R$ 10.000,00 e preciso urgentemente dele. Se não me pagar tomarei medidas drasticas.

Desde já agradeço.

PS: Sei onde vc mora
BulkMessageDialog.tsx:370 🚀 [BULK-MESSAGE-DIALOG] Iniciando handleSendMessage
BulkMessageDialog.tsx:371 📋 [BULK-MESSAGE-DIALOG] Estado atual: {messageMode: 'template', selectedTemplateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490', customMessage: '...', selectedChargesCount: 1}
BulkMessageDialog.tsx:400 📝 [BULK-MESSAGE-DIALOG] Modo: template, Mensagem: ...
BulkMessageDialog.tsx:403 🎯 [BULK-MESSAGE-DIALOG] Chamando onSendMessages com template: e30621d3-ae1e-47bb-a978-f1c2abcff490
ChargesDashboard.tsx:219 🚀 [CHARGES-DASHBOARD] Iniciando envio de mensagens via messageService
ChargesDashboard.tsx:220 📝 [CHARGES-DASHBOARD] Template ID: e30621d3-ae1e-47bb-a978-f1c2abcff490
ChargesDashboard.tsx:221 📝 [CHARGES-DASHBOARD] Mensagem customizada: Não
ChargesDashboard.tsx:222 🎯 [CHARGES-DASHBOARD] Cobranças selecionadas: ['0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e']
messageService.ts?t=1759932581195:26 📤 Enviando mensagens: {chargeCount: 1, isCustomMessage: undefined, hasDirectMessage: false, templateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490'}
edgeFunctionService.ts?t=1759932581195:199 🔄 Tentativa 1/3 - Enviando mensagens em lote...
edgeFunctionService.ts?t=1759932581195:32 🛡️ [SECURITY-INFO] tenant_validation {timestamp: '2025-10-08T14:10:23.295Z', success: true, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantSlug: 'jaturat'}
edgeFunctionService.ts?t=1759932581195:32 🛡️ [SECURITY-INFO] auth_validation {timestamp: '2025-10-08T14:10:23.308Z', success: true, tokenLength: 871, expiresAt: 1759933396}
edgeFunctionService.ts?t=1759932581195:16 🔍 [AUDIT] Edge Function Call {timestamp: '2025-10-08T14:10:23.308Z', requestId: 'req_1759932623295_hhl92mr7o', functionName: 'send-bulk-messages', tenant: {…}, payloadSize: 94, …}
edgeFunctionService.ts?t=1759932581195:257 📤 [SECURE] Enviando para Edge Function: {url: 'https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages', chargeCount: 1, templateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490', hasCustomMessage: false, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', …}
edgeFunctionService.ts?t=1759932581195:133  POST https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages 400 (Bad Request)
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4029
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4050
fulfilled @ @supabase_supabase-js.js?v=9facf328:4002
Promise.then
step @ @supabase_supabase-js.js?v=9facf328:4015
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4017
__awaiter6 @ @supabase_supabase-js.js?v=9facf328:3999
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4040
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1234
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1344
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1302
__awaiter @ @supabase_supabase-js.js?v=9facf328:1284
invoke @ @supabase_supabase-js.js?v=9facf328:1318
callEdgeFunctionWithRetry @ edgeFunctionService.ts?t=1759932581195:133
_executeBulkMessages @ edgeFunctionService.ts?t=1759932581195:266
await in _executeBulkMessages
sendBulkMessages @ edgeFunctionService.ts?t=1759932581195:200
sendBulkMessages @ messageService.ts?t=1759932581195:33
handleSendMessages @ ChargesDashboard.tsx:225
handleSendMessage @ BulkMessageDialog.tsx:404
callCallback2 @ chunk-F34GCA6J.js?v=9facf328:3807
invokeGuardedCallbackDev @ chunk-F34GCA6J.js?v=9facf328:3831
invokeGuardedCallback @ chunk-F34GCA6J.js?v=9facf328:3865
invokeGuardedCallbackAndCatchFirstError @ chunk-F34GCA6J.js?v=9facf328:3868
executeDispatch @ chunk-F34GCA6J.js?v=9facf328:7131
processDispatchQueueItemsInOrder @ chunk-F34GCA6J.js?v=9facf328:7151
processDispatchQueue @ chunk-F34GCA6J.js?v=9facf328:7160
dispatchEventsForPlugins @ chunk-F34GCA6J.js?v=9facf328:7168
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:7291
batchedUpdates$1 @ chunk-F34GCA6J.js?v=9facf328:19193
batchedUpdates @ chunk-F34GCA6J.js?v=9facf328:3712
dispatchEventForPluginEventSystem @ chunk-F34GCA6J.js?v=9facf328:7290
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-F34GCA6J.js?v=9facf328:5415
dispatchEvent @ chunk-F34GCA6J.js?v=9facf328:5409
dispatchDiscreteEvent @ chunk-F34GCA6J.js?v=9facf328:5386
edgeFunctionService.ts?t=1759932581195:142 🔍 [DEBUG] Resposta da Edge Function: {requestId: 'req_1759932623295_hhl92mr7o', hasError: true, status: 500, statusText: 'Edge Function returned a non-2xx status code', ok: false, …}
edgeFunctionService.ts?t=1759932581195:32 🛡️ [SECURITY-ERROR] edge_function_response {timestamp: '2025-10-08T14:10:23.687Z', success: false, status: 500, statusText: 'Edge Function returned a non-2xx status code', error: 'Edge Function returned a non-2xx status code'}
errorHandler.ts:69 🚨 Erro na Edge Function: {status: 500, statusText: 'Edge Function returned a non-2xx status code', errorMessage: 'Edge Function returned a non-2xx status code', errorText: 'Edge Function returned a non-2xx status code', requestId: 'req_1759932623295_hhl92mr7o', …}
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts?t=1759932581195:277
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:10:23.688Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts?t=1759932581195:39
_executeBulkMessages @ edgeFunctionService.ts?t=1759932581195:285
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:10:23.688Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts?t=1759932581195:39
_executeBulkMessages @ edgeFunctionService.ts?t=1759932581195:326
errorHandler.ts:69 ❌ Erro no edgeFunctionService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts?t=1759932581195:291:23)
    at async Object.sendBulkMessages (edgeFunctionService.ts?t=1759932581195:200:24)
    at async Object.sendBulkMessages (messageService.ts?t=1759932581195:33:28)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts?t=1759932581195:331
errorHandler.ts:69 ❌ Erro no messageService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts?t=1759932581195:291:23)
    at async Object.sendBulkMessages (edgeFunctionService.ts?t=1759932581195:200:24)
    at async Object.sendBulkMessages (messageService.ts?t=1759932581195:33:28)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
sendBulkMessages @ messageService.ts?t=1759932581195:53
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Erro ao enviar mensagens: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts?t=1759932581195:291:23)
    at async Object.sendBulkMessages (edgeFunctionService.ts?t=1759932581195:200:24)
    at async Object.sendBulkMessages (messageService.ts?t=1759932581195:33:28)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:241
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Stack trace: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759932581195:291:23)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759932581195:200:24)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/messageService.ts?t=1759932581195:33:28)
    at async handleSendMessages (http://localhost:8081/src/components/charges/dashboard/ChargesDashboard.tsx?t=1759932581195:243:28)
    at async handleSendMessage (http://localhost:8081/src/components/charges/BulkMessageDialog.tsx?t=1759926655047:397:17)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:242
ChargesDashboard.tsx:250 🏁 [CHARGES-DASHBOARD] Finalizando processo de envio
BulkMessageDialog.tsx:405 ✅ [BULK-MESSAGE-DIALOG] onSendMessages (template) executado com sucesso
BulkMessageDialog.tsx:415 🎉 [BULK-MESSAGE-DIALOG] Processo concluído, fechando diálogo
BulkMessageDialog.tsx:458 🏁 [BULK-MESSAGE-DIALOG] Finalizando handleSendMessage
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: TOKEN_REFRESHED
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: TOKEN_REFRESHED
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:193 [SupabaseProvider] Token renovado automaticamente
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:18:27.448Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:18:27.450Z'}
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:19:16.355Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:19:16.356Z'}
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: TOKEN_REFRESHED
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: TOKEN_REFRESHED
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:193 [SupabaseProvider] Token renovado automaticamente
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:19:16.545Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:19:16.546Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 19x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 4x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:22:55.649Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:22:55.650Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:23:46.601Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:23:46.602Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:26:04.977Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:26:04.978Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat undefined
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:30 🔍 [DEBUG] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 153x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat (repetido 6x) undefined
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 31x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:28 🔍 [DEBUG] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 153x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat (repetido 6x) undefined
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 31x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:28 🔍 [DEBUG] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
logThrottle.ts:28 [TENANT AUTO-SELECT] undefined (repetido 6x) undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 153x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 31x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:29:02.041Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:29:02.041Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat undefined
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:30 🔍 [DEBUG] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-08T14:32:47.834Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-08T14:32:47.836Z'}
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 460x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 92x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
cobrancas:1 Blocked aria-hidden on an element because its descendant retained focus. The focus must not be hidden from assistive technology users. Avoid using aria-hidden on a focused element or its ancestor. Consider using the inert attribute instead, which will also prevent focus. For more details, see the aria-hidden section of the WAI-ARIA specification at https://w3c.github.io/aria/#aria-hidden.
Element with focus: <div.mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2#radix-:r34:-content-template>
Ancestor with aria-hidden: <div.left-[50%] top-[50%] z-50 w-[95vw] max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-hidden !transform sm:max-w-[600px] max-h-[90vh] flex flex-col relative !fixed !left-[50%] !top-[50%] !translate-x-[-50%] !translate-y-[-50%]#radix-:r1a:> <div role=​"dialog" id=​"radix-:​r1a:​" aria-describedby=​"radix-:​r1c:​" aria-labelledby=​"radix-:​r1b:​" data-state=​"open" class=​"left-[50%]​ top-[50%]​ z-50 w-[95vw]​ max-w-md md:​max-w-2xl lg:​max-w-4xl xl:​max-w-6xl translate-x-[-50%]​ translate-y-[-50%]​ gap-4 border bg-background p-4 sm:​p-6 shadow-lg duration-200 data-[state=open]​:​animate-in data-[state=closed]​:​animate-out data-[state=closed]​:​fade-out-0 data-[state=open]​:​fade-in-0 data-[state=closed]​:​zoom-out-95 data-[state=open]​:​zoom-in-95 data-[state=closed]​:​slide-out-to-left-1/​2 data-[state=closed]​:​slide-out-to-top-[48%]​ data-[state=open]​:​slide-in-from-left-1/​2 data-[state=open]​:​slide-in-from-top-[48%]​ rounded-lg overflow-hidden !transform sm:​max-w-[600px]​ max-h-[90vh]​ flex flex-col relative !fixed !left-[50%]​ !top-[50%]​ !translate-x-[-50%]​ !translate-y-[-50%]​" tabindex=​"-1" style=​"pointer-events:​ auto;​">​…​</div>​flex
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'Olá bom dia {cliente.nome}, seu caloteiro!\n\nPage o…sticas.\n\nDesde já agradeço.\n\nPS: Sei onde vc mora', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: Olá bom dia Kleverson, seu caloteiro!

Page o que me deve imediatamente, o valor que vc me deve é de R$ 10.000,00 e preciso urgentemente dele. Se não me pagar tomarei medidas drasticas.

Desde já agradeço.

PS: Sei onde vc mora
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'Olá bom dia {cliente.nome}, seu caloteiro!\n\nPage o…sticas.\n\nDesde já agradeço.\n\nPS: Sei onde vc mora', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: Olá bom dia Kleverson, seu caloteiro!

Page o que me deve imediatamente, o valor que vc me deve é de R$ 10.000,00 e preciso urgentemente dele. Se não me pagar tomarei medidas drasticas.

Desde já agradeço.

PS: Sei onde vc mora
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 27x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 7x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'f', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: f
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'f', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: f
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fe', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fe
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fe', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fe
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fef', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fef
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fef', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fef
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefe', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefe
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefe', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefe
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefef', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefef
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefef', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefef
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefefe', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefefe
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefefe', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefefe
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefefef', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefefef
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'fefefef', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: fefefef
BulkMessageDialog.tsx:370 🚀 [BULK-MESSAGE-DIALOG] Iniciando handleSendMessage
BulkMessageDialog.tsx:371 📋 [BULK-MESSAGE-DIALOG] Estado atual: {messageMode: 'custom', selectedTemplateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490', customMessage: 'fefefef...', selectedChargesCount: 1}
BulkMessageDialog.tsx:400 📝 [BULK-MESSAGE-DIALOG] Modo: custom, Mensagem: fefefef...
BulkMessageDialog.tsx:409 🎯 [BULK-MESSAGE-DIALOG] Chamando onSendMessages com mensagem customizada: custom_1759934018782 fefefef
ChargesDashboard.tsx:219 🚀 [CHARGES-DASHBOARD] Iniciando envio de mensagens via messageService
ChargesDashboard.tsx:220 📝 [CHARGES-DASHBOARD] Template ID: custom_1759934018782
ChargesDashboard.tsx:221 📝 [CHARGES-DASHBOARD] Mensagem customizada: Sim
ChargesDashboard.tsx:222 🎯 [CHARGES-DASHBOARD] Cobranças selecionadas: ['0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e']
messageService.ts:49 📤 Enviando mensagens: {chargeCount: 1, isCustomMessage: true, hasDirectMessage: true, templateId: 'custom'}
edgeFunctionService.ts:352 🔄 Tentativa 1/3 - Enviando mensagens em lote...
edgeFunctionService.ts:144 🛡️ [SECURITY-INFO] tenant_validation {timestamp: '2025-10-08T14:33:38.783Z', success: true, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantSlug: 'jaturat'}
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 112x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 32x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
edgeFunctionService.ts:144 🛡️ [SECURITY-INFO] auth_validation {timestamp: '2025-10-08T14:33:38.796Z', success: true, tokenLength: 871, expiresAt: 1759936759}
edgeFunctionService.ts:418 🔍 [DEBUG] Payload sendo enviado para Edge Function: {requestData: {…}, chargeIds: 1, hasCustomMessage: true, hasTemplateId: false, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8'}
edgeFunctionService.ts:123 🔍 [AUDIT] Edge Function Call {timestamp: '2025-10-08T14:33:38.796Z', requestId: 'req_1759934018782_bnt28wsgd', functionName: 'send-bulk-messages', tenant: {…}, payloadSize: 71, …}functionName: "send-bulk-messages"payloadSize: 71requestId: "req_1759934018782_bnt28wsgd"tenant: {id: '795b056c-6e95-473f-9c59-b5f4eab973c8', slug: 'jaturat', name: 'jaturat'}timestamp: "2025-10-08T14:33:38.796Z"url: "http://localhost:8081/jaturat/cobrancas"userAgent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"[[Prototype]]: Object
edgeFunctionService.ts:448 📤 [SECURE] Enviando para Edge Function: {url: 'https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages', chargeCount: 1, templateId: 'custom_message', hasCustomMessage: true, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', …}chargeCount: 1hasCustomMessage: truerequestId: "req_1759934018782_bnt28wsgd"templateId: "custom_message"tenantId: "795b056c-6e95-473f-9c59-b5f4eab973c8"url: "https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages"[[Prototype]]: Object
edgeFunctionService.ts:265  POST https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages 400 (Bad Request)
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4029
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4050
fulfilled @ @supabase_supabase-js.js?v=9facf328:4002
Promise.then
step @ @supabase_supabase-js.js?v=9facf328:4015
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4017
__awaiter6 @ @supabase_supabase-js.js?v=9facf328:3999
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4040
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1234
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1344
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1302
__awaiter @ @supabase_supabase-js.js?v=9facf328:1284
invoke @ @supabase_supabase-js.js?v=9facf328:1318
callEdgeFunctionWithRetry @ edgeFunctionService.ts:265
_executeBulkMessages @ edgeFunctionService.ts:458
await in _executeBulkMessages
sendBulkMessages @ edgeFunctionService.ts:353
sendBulkMessages @ messageService.ts:57
handleSendMessages @ ChargesDashboard.tsx:225
handleSendMessage @ BulkMessageDialog.tsx:411
callCallback2 @ chunk-F34GCA6J.js?v=9facf328:3807
invokeGuardedCallbackDev @ chunk-F34GCA6J.js?v=9facf328:3831
invokeGuardedCallback @ chunk-F34GCA6J.js?v=9facf328:3865
invokeGuardedCallbackAndCatchFirstError @ chunk-F34GCA6J.js?v=9facf328:3868
executeDispatch @ chunk-F34GCA6J.js?v=9facf328:7131
processDispatchQueueItemsInOrder @ chunk-F34GCA6J.js?v=9facf328:7151
processDispatchQueue @ chunk-F34GCA6J.js?v=9facf328:7160
dispatchEventsForPlugins @ chunk-F34GCA6J.js?v=9facf328:7168
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:7291
batchedUpdates$1 @ chunk-F34GCA6J.js?v=9facf328:19193
batchedUpdates @ chunk-F34GCA6J.js?v=9facf328:3712
dispatchEventForPluginEventSystem @ chunk-F34GCA6J.js?v=9facf328:7290
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-F34GCA6J.js?v=9facf328:5415
dispatchEvent @ chunk-F34GCA6J.js?v=9facf328:5409
dispatchDiscreteEvent @ chunk-F34GCA6J.js?v=9facf328:5386
edgeFunctionService.ts:276 🔍 [DEBUG] Resposta da Edge Function: {requestId: 'req_1759934018782_bnt28wsgd', hasError: true, status: 500, statusText: 'Edge Function returned a non-2xx status code', ok: false, …}
edgeFunctionService.ts:144 🛡️ [SECURITY-ERROR] edge_function_response {timestamp: '2025-10-08T14:33:39.196Z', success: false, status: 500, statusText: 'Edge Function returned a non-2xx status code', error: 'Edge Function returned a non-2xx status code'}
errorHandler.ts:69 🚨 Erro na Edge Function: {status: 500, statusText: 'Edge Function returned a non-2xx status code', errorMessage: 'Edge Function returned a non-2xx status code', errorText: 'Edge Function returned a non-2xx status code', requestId: 'req_1759934018782_bnt28wsgd', …}
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts:475
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:33:39.196Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts:160
_executeBulkMessages @ edgeFunctionService.ts:484
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:33:39.197Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts:160
_executeBulkMessages @ edgeFunctionService.ts:533
errorHandler.ts:69 ❌ Erro no edgeFunctionService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts:494:15)
    at async Object.sendBulkMessages (edgeFunctionService.ts:353:16)
    at async Object.sendBulkMessages (messageService.ts:57:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:411:9)
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts:537
errorHandler.ts:69 ❌ Erro no messageService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts:494:15)
    at async Object.sendBulkMessages (edgeFunctionService.ts:353:16)
    at async Object.sendBulkMessages (messageService.ts:57:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:411:9)
console.error @ errorHandler.ts:69
sendBulkMessages @ messageService.ts:84
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Erro ao enviar mensagens: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts:494:15)
    at async Object.sendBulkMessages (edgeFunctionService.ts:353:16)
    at async Object.sendBulkMessages (messageService.ts:57:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:411:9)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:241
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Stack trace: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759933915902:297:23)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759933915902:200:24)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/messageService.ts?t=1759933915902:33:28)
    at async handleSendMessages (http://localhost:8081/src/components/charges/dashboard/ChargesDashboard.tsx?t=1759933915902:243:28)
    at async handleSendMessage (http://localhost:8081/src/components/charges/BulkMessageDialog.tsx?t=1759926655047:403:17)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:242
ChargesDashboard.tsx:250 🏁 [CHARGES-DASHBOARD] Finalizando processo de envio
BulkMessageDialog.tsx:412 ✅ [BULK-MESSAGE-DIALOG] onSendMessages (custom) executado com sucesso
BulkMessageDialog.tsx:415 🎉 [BULK-MESSAGE-DIALOG] Processo concluído, fechando diálogo
BulkMessageDialog.tsx:458 🏁 [BULK-MESSAGE-DIALOG] Finalizando handleSendMessage
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 46x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 11x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
cobrancas:1 Blocked aria-hidden on an element because its descendant retained focus. The focus must not be hidden from assistive technology users. Avoid using aria-hidden on a focused element or its ancestor. Consider using the inert attribute instead, which will also prevent focus. For more details, see the aria-hidden section of the WAI-ARIA specification at https://w3c.github.io/aria/#aria-hidden.
Element with focus: <div.mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2#radix-:r3q:-content-template>
Ancestor with aria-hidden: <div.left-[50%] top-[50%] z-50 w-[95vw] max-w-md md:max-w-2xl lg:max-w-4xl xl:max-w-6xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-4 sm:p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg overflow-hidden !transform sm:max-w-[600px] max-h-[90vh] flex flex-col relative !fixed !left-[50%] !top-[50%] !translate-x-[-50%] !translate-y-[-50%]#radix-:r1a:> <div role=​"dialog" id=​"radix-:​r1a:​" aria-describedby=​"radix-:​r1c:​" aria-labelledby=​"radix-:​r1b:​" data-state=​"open" class=​"left-[50%]​ top-[50%]​ z-50 w-[95vw]​ max-w-md md:​max-w-2xl lg:​max-w-4xl xl:​max-w-6xl translate-x-[-50%]​ translate-y-[-50%]​ gap-4 border bg-background p-4 sm:​p-6 shadow-lg duration-200 data-[state=open]​:​animate-in data-[state=closed]​:​animate-out data-[state=closed]​:​fade-out-0 data-[state=open]​:​fade-in-0 data-[state=closed]​:​zoom-out-95 data-[state=open]​:​zoom-in-95 data-[state=closed]​:​slide-out-to-left-1/​2 data-[state=closed]​:​slide-out-to-top-[48%]​ data-[state=open]​:​slide-in-from-left-1/​2 data-[state=open]​:​slide-in-from-top-[48%]​ rounded-lg overflow-hidden !transform sm:​max-w-[600px]​ max-h-[90vh]​ flex flex-col relative !fixed !left-[50%]​ !top-[50%]​ !translate-x-[-50%]​ !translate-y-[-50%]​" tabindex=​"-1" style=​"pointer-events:​ auto;​" data-aria-hidden=​"true" aria-hidden=​"true">​…​</div>​flex
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'Olá bom dia {cliente.nome}, seu caloteiro!\n\nPage o…sticas.\n\nDesde já agradeço.\n\nPS: Sei onde vc mora', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: Olá bom dia Kleverson, seu caloteiro!

Page o que me deve imediatamente, o valor que vc me deve é de R$ 10.000,00 e preciso urgentemente dele. Se não me pagar tomarei medidas drasticas.

Desde já agradeço.

PS: Sei onde vc mora
BulkMessageDialog.tsx:164 🔍 [GENERATE PREVIEW] Estado da query: {isLoadingPreview: false, hasPreviewChargeData: true, previewError: undefined, selectedChargesCount: 1, firstChargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
BulkMessageDialog.tsx:204 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', valor: 10000, data_vencimento: '2025-10-06', descricao: 'Faturamento 10/2025 - Contrato 20252071 - Hiper Demais (1x)', link_pagamento: null, …}
BulkMessageDialog.tsx:205 🔍 [PREVIEW DEBUG] Dados do customer: {id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', …}
BulkMessageDialog.tsx:226 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
BulkMessageDialog.tsx:227 🔍 [PREVIEW DEBUG] Verificação específica do campo company: {chargeData.customers?.Company (original): undefined, dataForProcessing.customer.company (mapeado): 'KLEVERSON SILVA JARA', typeof Company: 'string', typeof company: 'string'}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'Olá bom dia {cliente.nome}, seu caloteiro!\n\nPage o…sticas.\n\nDesde já agradeço.\n\nPS: Sei onde vc mora', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: Olá bom dia Kleverson, seu caloteiro!

Page o que me deve imediatamente, o valor que vc me deve é de R$ 10.000,00 e preciso urgentemente dele. Se não me pagar tomarei medidas drasticas.

Desde já agradeço.

PS: Sei onde vc mora
BulkMessageDialog.tsx:370 🚀 [BULK-MESSAGE-DIALOG] Iniciando handleSendMessage
BulkMessageDialog.tsx:371 📋 [BULK-MESSAGE-DIALOG] Estado atual: {messageMode: 'template', selectedTemplateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490', customMessage: '...', selectedChargesCount: 1}
BulkMessageDialog.tsx:400 📝 [BULK-MESSAGE-DIALOG] Modo: template, Mensagem: ...
BulkMessageDialog.tsx:403 🎯 [BULK-MESSAGE-DIALOG] Chamando onSendMessages com template: e30621d3-ae1e-47bb-a978-f1c2abcff490
ChargesDashboard.tsx:219 🚀 [CHARGES-DASHBOARD] Iniciando envio de mensagens via messageService
ChargesDashboard.tsx:220 📝 [CHARGES-DASHBOARD] Template ID: e30621d3-ae1e-47bb-a978-f1c2abcff490
ChargesDashboard.tsx:221 📝 [CHARGES-DASHBOARD] Mensagem customizada: Não
ChargesDashboard.tsx:222 🎯 [CHARGES-DASHBOARD] Cobranças selecionadas: ['0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e']
messageService.ts:49 📤 Enviando mensagens: {chargeCount: 1, isCustomMessage: undefined, hasDirectMessage: false, templateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490'}
edgeFunctionService.ts:352 🔄 Tentativa 1/3 - Enviando mensagens em lote...
edgeFunctionService.ts:144 🛡️ [SECURITY-INFO] tenant_validation {timestamp: '2025-10-08T14:35:26.590Z', success: true, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantSlug: 'jaturat'}
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 27x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 7x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
edgeFunctionService.ts:144 🛡️ [SECURITY-INFO] auth_validation {timestamp: '2025-10-08T14:35:26.600Z', success: true, tokenLength: 871, expiresAt: 1759936759}
edgeFunctionService.ts:418 🔍 [DEBUG] Payload sendo enviado para Edge Function: {requestData: {…}, chargeIds: 1, hasCustomMessage: false, hasTemplateId: true, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8'}
edgeFunctionService.ts:123 🔍 [AUDIT] Edge Function Call {timestamp: '2025-10-08T14:35:26.601Z', requestId: 'req_1759934126590_slcxqp68t', functionName: 'send-bulk-messages', tenant: {…}, payloadSize: 94, …}
edgeFunctionService.ts:448 📤 [SECURE] Enviando para Edge Function: {url: 'https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages', chargeCount: 1, templateId: 'e30621d3-ae1e-47bb-a978-f1c2abcff490', hasCustomMessage: false, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', …}chargeCount: 1hasCustomMessage: falserequestId: "req_1759934126590_slcxqp68t"templateId: "e30621d3-ae1e-47bb-a978-f1c2abcff490"tenantId: "795b056c-6e95-473f-9c59-b5f4eab973c8"url: "https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages"[[Prototype]]: Object
edgeFunctionService.ts:265  POST https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages 400 (Bad Request)
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4029
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4050
fulfilled @ @supabase_supabase-js.js?v=9facf328:4002
Promise.then
step @ @supabase_supabase-js.js?v=9facf328:4015
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4017
__awaiter6 @ @supabase_supabase-js.js?v=9facf328:3999
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4040
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1234
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1344
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1302
__awaiter @ @supabase_supabase-js.js?v=9facf328:1284
invoke @ @supabase_supabase-js.js?v=9facf328:1318
callEdgeFunctionWithRetry @ edgeFunctionService.ts:265
_executeBulkMessages @ edgeFunctionService.ts:458
await in _executeBulkMessages
sendBulkMessages @ edgeFunctionService.ts:353
sendBulkMessages @ messageService.ts:57
handleSendMessages @ ChargesDashboard.tsx:225
handleSendMessage @ BulkMessageDialog.tsx:404
callCallback2 @ chunk-F34GCA6J.js?v=9facf328:3807
invokeGuardedCallbackDev @ chunk-F34GCA6J.js?v=9facf328:3831
invokeGuardedCallback @ chunk-F34GCA6J.js?v=9facf328:3865
invokeGuardedCallbackAndCatchFirstError @ chunk-F34GCA6J.js?v=9facf328:3868
executeDispatch @ chunk-F34GCA6J.js?v=9facf328:7131
processDispatchQueueItemsInOrder @ chunk-F34GCA6J.js?v=9facf328:7151
processDispatchQueue @ chunk-F34GCA6J.js?v=9facf328:7160
dispatchEventsForPlugins @ chunk-F34GCA6J.js?v=9facf328:7168
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:7291
batchedUpdates$1 @ chunk-F34GCA6J.js?v=9facf328:19193
batchedUpdates @ chunk-F34GCA6J.js?v=9facf328:3712
dispatchEventForPluginEventSystem @ chunk-F34GCA6J.js?v=9facf328:7290
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-F34GCA6J.js?v=9facf328:5415
dispatchEvent @ chunk-F34GCA6J.js?v=9facf328:5409
dispatchDiscreteEvent @ chunk-F34GCA6J.js?v=9facf328:5386
edgeFunctionService.ts:276 🔍 [DEBUG] Resposta da Edge Function: {requestId: 'req_1759934126590_slcxqp68t', hasError: true, status: 500, statusText: 'Edge Function returned a non-2xx status code', ok: false, …}functionName: "send-bulk-messages"hasError: trueok: falserequestId: "req_1759934126590_slcxqp68t"responseData: nullresponseError: FunctionsHttpError: Edge Function returned a non-2xx status code
    at FunctionsClient.<anonymous> (http://localhost:8081/node_modules/.vite/deps/@supabase_supabase-js.js?v=9facf328:1360:27)
    at Generator.next (<anonymous>)
    at fulfilled (http://localhost:8081/node_modules/.vite/deps/@supabase_supabase-js.js?v=9facf328:1287:32)context: Responsebody: (...)bodyUsed: falseheaders: Headers {}[[Prototype]]: Headersok: falseredirected: falsestatus: 400statusText: ""type: "cors"url: "https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages"[[Prototype]]: Responsename: "FunctionsHttpError"message: "Edge Function returned a non-2xx status code"stack: "FunctionsHttpError: Edge Function returned a non-2xx status code\n    at FunctionsClient.<anonymous> (http://localhost:8081/node_modules/.vite/deps/@supabase_supabase-js.js?v=9facf328:1360:27)\n    at Generator.next (<anonymous>)\n    at fulfilled (http://localhost:8081/node_modules/.vite/deps/@supabase_supabase-js.js?v=9facf328:1287:32)"[[Prototype]]: FunctionsErrorstatus: 500statusText: "Edge Function returned a non-2xx status code"[[Prototype]]: Object
edgeFunctionService.ts:144 🛡️ [SECURITY-ERROR] edge_function_response {timestamp: '2025-10-08T14:35:27.680Z', success: false, status: 500, statusText: 'Edge Function returned a non-2xx status code', error: 'Edge Function returned a non-2xx status code'}
errorHandler.ts:69 🚨 Erro na Edge Function: {status: 500, statusText: 'Edge Function returned a non-2xx status code', errorMessage: 'Edge Function returned a non-2xx status code', errorText: 'Edge Function returned a non-2xx status code', requestId: 'req_1759934126590_slcxqp68t', …}
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts:475
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:35:27.680Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts:160
_executeBulkMessages @ edgeFunctionService.ts:484
errorHandler.ts:69 ❌ [AUDIT-ERROR] Edge Function Error {timestamp: '2025-10-08T14:35:27.680Z', error: {…}, context: {…}}
console.error @ errorHandler.ts:69
logError @ edgeFunctionService.ts:160
_executeBulkMessages @ edgeFunctionService.ts:533
errorHandler.ts:69 ❌ Erro no edgeFunctionService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts:494:15)
    at async Object.sendBulkMessages (edgeFunctionService.ts:353:16)
    at async Object.sendBulkMessages (messageService.ts:57:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
_executeBulkMessages @ edgeFunctionService.ts:537
errorHandler.ts:69 ❌ Erro no messageService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts:494:15)
    at async Object.sendBulkMessages (edgeFunctionService.ts:353:16)
    at async Object.sendBulkMessages (messageService.ts:57:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
sendBulkMessages @ messageService.ts:84
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Erro ao enviar mensagens: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (edgeFunctionService.ts:494:15)
    at async Object.sendBulkMessages (edgeFunctionService.ts:353:16)
    at async Object.sendBulkMessages (messageService.ts:57:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:404:9)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:241
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Stack trace: Error: Edge Function returned a non-2xx status code
    at Object._executeBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759933915902:297:23)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759933915902:200:24)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/messageService.ts?t=1759933915902:33:28)
    at async handleSendMessages (http://localhost:8081/src/components/charges/dashboard/ChargesDashboard.tsx?t=1759933915902:243:28)
    at async handleSendMessage (http://localhost:8081/src/components/charges/BulkMessageDialog.tsx?t=1759926655047:397:17)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:242
ChargesDashboard.tsx:250 🏁 [CHARGES-DASHBOARD] Finalizando processo de envio
BulkMessageDialog.tsx:405 ✅ [BULK-MESSAGE-DIALOG] onSendMessages (template) executado com sucesso
BulkMessageDialog.tsx:415 🎉 [BULK-MESSAGE-DIALOG] Processo concluído, fechando diálogo
BulkMessageDialog.tsx:458 🏁 [BULK-MESSAGE-DIALOG] Finalizando handleSendMessage
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 46x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 11x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
