chunk-F34GCA6J.js?v=9facf328:21839 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
SupabaseProvider.tsx:38 [SupabaseProviderSingleton] Nova instância singleton criada
App.tsx:24 [DEBUG] App.tsx carregado - URL atual: http://localhost:8081/jaturat/cobrancas
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: false, loading: true, timestamp: '2025-10-01T16:07:45.525Z'}
react-router-dom.js?v=9facf328:4285 ⚠️ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
warnOnce @ react-router-dom.js?v=9facf328:4285
logDeprecation @ react-router-dom.js?v=9facf328:4288
logV6DeprecationWarnings @ react-router-dom.js?v=9facf328:4291
(anonymous) @ react-router-dom.js?v=9facf328:5196
commitHookEffectListMount @ chunk-F34GCA6J.js?v=9facf328:17159
commitPassiveMountOnFiber @ chunk-F34GCA6J.js?v=9facf328:18437
commitPassiveMountEffects_complete @ chunk-F34GCA6J.js?v=9facf328:18409
commitPassiveMountEffects_begin @ chunk-F34GCA6J.js?v=9facf328:18399
commitPassiveMountEffects @ chunk-F34GCA6J.js?v=9facf328:18389
flushPassiveEffectsImpl @ chunk-F34GCA6J.js?v=9facf328:19772
flushPassiveEffects @ chunk-F34GCA6J.js?v=9facf328:19729
performSyncWorkOnRoot @ chunk-F34GCA6J.js?v=9facf328:19148
flushSyncCallbacks @ chunk-F34GCA6J.js?v=9facf328:9353
commitRootImpl @ chunk-F34GCA6J.js?v=9facf328:19714
commitRoot @ chunk-F34GCA6J.js?v=9facf328:19559
finishConcurrentRender @ chunk-F34GCA6J.js?v=9facf328:19084
performConcurrentWorkOnRoot @ chunk-F34GCA6J.js?v=9facf328:18989
workLoop @ chunk-F34GCA6J.js?v=9facf328:193
flushWork @ chunk-F34GCA6J.js?v=9facf328:172
performWorkUntilDeadline @ chunk-F34GCA6J.js?v=9facf328:378
react-router-dom.js?v=9facf328:4285 ⚠️ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.
warnOnce @ react-router-dom.js?v=9facf328:4285
logDeprecation @ react-router-dom.js?v=9facf328:4288
logV6DeprecationWarnings @ react-router-dom.js?v=9facf328:4294
(anonymous) @ react-router-dom.js?v=9facf328:5196
commitHookEffectListMount @ chunk-F34GCA6J.js?v=9facf328:17159
commitPassiveMountOnFiber @ chunk-F34GCA6J.js?v=9facf328:18437
commitPassiveMountEffects_complete @ chunk-F34GCA6J.js?v=9facf328:18409
commitPassiveMountEffects_begin @ chunk-F34GCA6J.js?v=9facf328:18399
commitPassiveMountEffects @ chunk-F34GCA6J.js?v=9facf328:18389
flushPassiveEffectsImpl @ chunk-F34GCA6J.js?v=9facf328:19772
flushPassiveEffects @ chunk-F34GCA6J.js?v=9facf328:19729
performSyncWorkOnRoot @ chunk-F34GCA6J.js?v=9facf328:19148
flushSyncCallbacks @ chunk-F34GCA6J.js?v=9facf328:9353
commitRootImpl @ chunk-F34GCA6J.js?v=9facf328:19714
commitRoot @ chunk-F34GCA6J.js?v=9facf328:19559
finishConcurrentRender @ chunk-F34GCA6J.js?v=9facf328:19084
performConcurrentWorkOnRoot @ chunk-F34GCA6J.js?v=9facf328:18989
workLoop @ chunk-F34GCA6J.js?v=9facf328:193
flushWork @ chunk-F34GCA6J.js?v=9facf328:172
performWorkUntilDeadline @ chunk-F34GCA6J.js?v=9facf328:378
AppInitializationContext.tsx:35 [AppInitialization] Lock adquirido: portal-init-1759334865528
PortalContext.tsx:90 [PortalContext] Inicializando portal: {tenantFromManager: 'nenhum', localStorage: {…}}
PortalContext.tsx:50 [PortalContext] Carregando detalhes do tenant: 795b056c-6e95-473f-9c59-b5f4eab973c8
PortalContext.tsx:203 [PortalContext] Mudança de usuário detectada. ID anterior: null, Novo ID: 5cfb55da-080c-413f-94ed-7545bd0bdc61
logger.ts:185 [2025-10-01T16:07:45.528Z] [INFO] {message: '[UnifiedTenantProvider] Inicializando provider unificado', metadata: {…}}
SupabaseProvider.tsx:107 [SupabaseProvider] Instância singleton validada e inicializada com sucesso
SupabaseProvider.tsx:134 [SupabaseProvider] Iniciando verificação de sessão inicial
supabaseAuthManager.ts:160 [SupabaseAuthManager] Inicializando gerenciador de autenticação (sem logout automático)...
supabaseAuthManager.ts:171 [SupabaseAuthManager] Timer de refresh preventivo DESABILITADO - SDK gerencia automaticamente
supabaseAuthManager.ts:141 [SupabaseAuthManager] Sincronização de headers configurada
errorHandler.ts:104 🛡️ Proteções contra erros de extensões inicializadas
App.tsx:52 [App] Sistema de limpeza automática de sessões inicializado
logger.ts:185 [2025-10-01T16:07:45.531Z] [INFO] {message: '[UnifiedTenantProvider] Core TenantProvider inicializado com sucesso', metadata: {…}}
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: SIGNED_IN
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:96 [SupabaseAuthManager] Limpeza de chaves legadas concluída
SupabaseProvider.tsx:179 [SupabaseProvider] Auth state changed: SIGNED_IN
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:199 [SupabaseProvider] Usuário logado
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-01T16:07:45.599Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-01T16:07:45.600Z'}
supabaseAuthManager.ts:123 [SupabaseAuthManager] Auth state changed: INITIAL_SESSION
supabaseAuthManager.ts:128 [SupabaseAuthManager] Headers do Axios atualizados com novo token
supabaseAuthManager.ts:180 [SupabaseAuthManager] Headers iniciais configurados
supabaseAuthManager.ts:183 [SupabaseAuthManager] Inicialização concluída
SupabaseProvider.tsx:157 [SupabaseProvider] Sessão inicial carregada e cacheada com sucesso
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-01T16:07:45.623Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-01T16:07:45.623Z'}
SupabaseProvider.tsx:186 [SupabaseProvider] Headers do Axios sincronizados com novo token
SupabaseProvider.tsx:221 [SupabaseProvider] Contexto atualizado: {hasUser: true, loading: false, timestamp: '2025-10-01T16:07:45.624Z'}
AppRouter.tsx:99 [AppRouter] Debug - User data: {hasUser: true, userEmail: 'kleverson.jara@nexsyn.com.br', userRole: 'ADMIN', userMetadata: {…}, timestamp: '2025-10-01T16:07:45.625Z'}
AppInitializationContext.tsx:55 [AppInitialization] Lock liberado: portal-init-1759334865528
PortalContext.tsx:50 [PortalContext] Carregando detalhes do tenant: 795b056c-6e95-473f-9c59-b5f4eab973c8
TenantAutoLoginRouter.tsx:60 🔄 [TenantAutoLoginRouter] Sincronizando tenant com store: {id: '795b056c-6e95-473f-9c59-b5f4eab973c8', slug: 'jaturat', name: 'jaturat'}
logThrottle.ts:30 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: {currentTenant: {…}, userRole: null, requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:30 [TENANT ACCESS GUARD] Acesso liberado para tenant: jaturat undefined
logThrottle.ts:30 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
useNotifications.ts:27 Loading notifications...
logThrottle.ts:30 🔍 [DEBUG] undefined undefined
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {page: 1, limit: 1000}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
Charges.tsx:34 🏢 [AUDIT] Acessando página de cobranças - Tenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
Charges.tsx:35 📊 [AUDIT] Aba ativa: dashboard
Charges.tsx:42 🧹 [AUDIT] Limpando cache de cobranças para tenant: jaturat
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {page: 1, limit: 1000}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
useCharges.ts:72 🔍 [CHARGES DEBUG] Iniciando busca de cobranças
useCharges.ts:73 🔍 [CHARGES DEBUG] TenantId recebido: 795b056c-6e95-473f-9c59-b5f4eab973c8
useCharges.ts:74 🔍 [CHARGES DEBUG] CurrentTenant: jaturat (795b056c-6e95-473f-9c59-b5f4eab973c8)
useCharges.ts:75 🔍 [CHARGES DEBUG] Parâmetros da query: {}
useCharges.ts:76 🔍 [CHARGES DEBUG] HasAccess: true
useCharges.ts:77 🔍 [CHARGES DEBUG] AccessError: null
useCharges.ts:162 🔍 [CHARGES DEBUG] Executando query no Supabase...
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
tenantStore.ts:197 🔍 [DEBUG] fetchPortalData iniciado
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
useZustandAuth.ts:52 [useZustandAuth] Sessão inicial carregada: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
logThrottle.ts:30 🔍 [DEBUG] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
logThrottle.ts:30 [TENANT AUTO-SELECT] undefined undefined
useNotifications.ts:38 Loaded notifications: []
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
useCharges.ts:201 🔍 [CHARGES DEBUG] Resultado da query: {data: 1, total: 1, error: null, countError: null}
useCharges.ts:215 ✅ [CHARGES DEBUG] Cobranças encontradas: 1
useCharges.ts:217 🔍 [CHARGES DEBUG] Primeiras cobranças: [{…}]
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
chunk-V5FSLQAU.js?v=9facf328:1399 Warning: Missing `Description` or `aria-describedby={undefined}` for {DialogContent}.
(anonymous) @ chunk-V5FSLQAU.js?v=9facf328:1399
commitHookEffectListMount @ chunk-F34GCA6J.js?v=9facf328:17159
commitPassiveMountOnFiber @ chunk-F34GCA6J.js?v=9facf328:18437
commitPassiveMountEffects_complete @ chunk-F34GCA6J.js?v=9facf328:18409
commitPassiveMountEffects_begin @ chunk-F34GCA6J.js?v=9facf328:18399
commitPassiveMountEffects @ chunk-F34GCA6J.js?v=9facf328:18389
flushPassiveEffectsImpl @ chunk-F34GCA6J.js?v=9facf328:19772
flushPassiveEffects @ chunk-F34GCA6J.js?v=9facf328:19729
commitRootImpl @ chunk-F34GCA6J.js?v=9facf328:19698
commitRoot @ chunk-F34GCA6J.js?v=9facf328:19559
performSyncWorkOnRoot @ chunk-F34GCA6J.js?v=9facf328:19175
flushSyncCallbacks @ chunk-F34GCA6J.js?v=9facf328:9353
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:18898
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
tenantStore.ts:202 🔍 [DEBUG] Usuário obtido: 5cfb55da-080c-413f-94ed-7545bd0bdc61
tenantStore.ts:146 📦 [CACHE] Carregando dados do cache local
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 504x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 102x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
BulkMessageDialog.tsx:182 🔍 [PREVIEW DEBUG] Buscando dados para preview: {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', chargeId: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e'}
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 22x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 7x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
BulkMessageDialog.tsx:265 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', tenant_id: '795b056c-6e95-473f-9c59-b5f4eab973c8', customer_id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', valor: 10000, status: 'PENDING', …}
BulkMessageDialog.tsx:266 🔍 [PREVIEW DEBUG] Dados do customer: {name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', cpf_cnpj: 58875046000109}
BulkMessageDialog.tsx:280 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'o', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: o
BulkMessageDialog.tsx:265 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', tenant_id: '795b056c-6e95-473f-9c59-b5f4eab973c8', customer_id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', valor: 10000, status: 'PENDING', …}
BulkMessageDialog.tsx:266 🔍 [PREVIEW DEBUG] Dados do customer: {name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', cpf_cnpj: 58875046000109}
BulkMessageDialog.tsx:280 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'ol', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: ol
BulkMessageDialog.tsx:265 🔍 [PREVIEW DEBUG] Dados da cobrança completos: {id: '0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e', tenant_id: '795b056c-6e95-473f-9c59-b5f4eab973c8', customer_id: 'c0898ae3-c341-49c6-a9e4-073a38ae815e', valor: 10000, status: 'PENDING', …}
BulkMessageDialog.tsx:266 🔍 [PREVIEW DEBUG] Dados do customer: {name: 'KLEVERSON SILVA JARA', email: 'kleverson.jara@nexsyn.com.br', phone: '(65) 99974-5637', company: 'KLEVERSON SILVA JARA', cpf_cnpj: 58875046000109}
BulkMessageDialog.tsx:280 🔍 [PREVIEW DEBUG] Dados sendo enviados para processMessageTags: {customer: {…}, charge: {…}}
messageUtils.ts:66 🏷️ Processando tags da mensagem: {originalMessage: 'ola', customerData: {…}, chargeData: {…}}
messageUtils.ts:76 🔍 Debug campos específicos: {customer.company: 'KLEVERSON SILVA JARA', customer.cpf_cnpj: 58875046000109, typeof company: 'string', typeof cpf_cnpj: 'number'}
messageUtils.ts:127 ✅ Mensagem processada: ola
BulkMessageDialog.tsx:315 🚀 [BULK-MESSAGE-DIALOG] Iniciando handleSendMessage
BulkMessageDialog.tsx:316 📋 [BULK-MESSAGE-DIALOG] Estado atual: {messageMode: 'custom', selectedTemplateId: '', customMessage: 'ola...', selectedChargesCount: 1}
BulkMessageDialog.tsx:345 📝 [BULK-MESSAGE-DIALOG] Modo: custom, Mensagem: ola...
BulkMessageDialog.tsx:354 🎯 [BULK-MESSAGE-DIALOG] Chamando onSendMessages com mensagem customizada: custom_1759334873293 ola
ChargesDashboard.tsx:219 🚀 [CHARGES-DASHBOARD] Iniciando envio de mensagens via messageService
ChargesDashboard.tsx:220 📝 [CHARGES-DASHBOARD] Template ID: custom_1759334873293
ChargesDashboard.tsx:221 📝 [CHARGES-DASHBOARD] Mensagem customizada: Sim
ChargesDashboard.tsx:222 🎯 [CHARGES-DASHBOARD] Cobranças selecionadas: ['0d2efa80-00cc-4cd5-b324-c9a5eb58ea6e']
messageService.ts:42 📌 Mensagem original recebida: ola
messageService.ts:52 📝 Usando template temporário para mensagem customizada: 3eef6e36-fec4-448b-a9eb-053bd14ff0f2
messageService.ts:57 📤 Enviando para Edge Function: {chargeCount: 1, templateId: '3eef6e36-fec4-448b-a9eb-053bd14ff0f2', isCustom: 'ola'}
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 8x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 4x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
edgeFunctionService.ts:173 📤 Enviando para Edge Function: {url: 'https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages', chargeCount: 1, templateId: '3eef6e36-fec4-448b-a9eb-053bd14ff0f2', tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8'}chargeCount: 1templateId: "3eef6e36-fec4-448b-a9eb-053bd14ff0f2"tenantId: "795b056c-6e95-473f-9c59-b5f4eab973c8"url: "https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages"[[Prototype]]: Object
edgeFunctionService.ts:188 🔐 [DEBUG] Headers de autenticação: {hasToken: true, tokenLength: 871, tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tokenPrefix: 'eyJhbGciOiJIUzI1NiIs...'}hasToken: truetenantId: "795b056c-6e95-473f-9c59-b5f4eab973c8"tokenLength: 871tokenPrefix: "eyJhbGciOiJIUzI1NiIs..."[[Prototype]]: Object
edgeFunctionService.ts:35  POST https://wyehpiutzvwplllumgdk.supabase.co/functions/v1/send-bulk-messages 401 (Unauthorized)
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4029
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4050
fulfilled @ @supabase_supabase-js.js?v=9facf328:4002
Promise.then
step @ @supabase_supabase-js.js?v=9facf328:4015
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4017
__awaiter6 @ @supabase_supabase-js.js?v=9facf328:3999
(anonymous) @ @supabase_supabase-js.js?v=9facf328:4040
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1234
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1344
(anonymous) @ @supabase_supabase-js.js?v=9facf328:1302
__awaiter @ @supabase_supabase-js.js?v=9facf328:1284
invoke @ @supabase_supabase-js.js?v=9facf328:1318
callEdgeFunctionWithRetry @ edgeFunctionService.ts:35
sendBulkMessages @ edgeFunctionService.ts:196
await in sendBulkMessages
sendBulkMessages @ messageService.ts:64
handleSendMessages @ ChargesDashboard.tsx:225
handleSendMessage @ BulkMessageDialog.tsx:356
callCallback2 @ chunk-F34GCA6J.js?v=9facf328:3807
invokeGuardedCallbackDev @ chunk-F34GCA6J.js?v=9facf328:3831
invokeGuardedCallback @ chunk-F34GCA6J.js?v=9facf328:3865
invokeGuardedCallbackAndCatchFirstError @ chunk-F34GCA6J.js?v=9facf328:3868
executeDispatch @ chunk-F34GCA6J.js?v=9facf328:7131
processDispatchQueueItemsInOrder @ chunk-F34GCA6J.js?v=9facf328:7151
processDispatchQueue @ chunk-F34GCA6J.js?v=9facf328:7160
dispatchEventsForPlugins @ chunk-F34GCA6J.js?v=9facf328:7168
(anonymous) @ chunk-F34GCA6J.js?v=9facf328:7291
batchedUpdates$1 @ chunk-F34GCA6J.js?v=9facf328:19193
batchedUpdates @ chunk-F34GCA6J.js?v=9facf328:3712
dispatchEventForPluginEventSystem @ chunk-F34GCA6J.js?v=9facf328:7290
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-F34GCA6J.js?v=9facf328:5415
dispatchEvent @ chunk-F34GCA6J.js?v=9facf328:5409
dispatchDiscreteEvent @ chunk-F34GCA6J.js?v=9facf328:5386
edgeFunctionService.ts:49 🔍 [DEBUG] Resposta da Edge Function: {hasError: true, status: 500, statusText: 'Edge Function returned a non-2xx status code', ok: false, responseData: null, …}
edgeFunctionService.ts:203 🔍 [DEBUG] Verificando response.ok: {ok: false, status: 500, statusText: 'Edge Function returned a non-2xx status code', hasData: false, hasError: true}
errorHandler.ts:69 ❌ Erro na Edge Function: {status: 500, statusText: 'Edge Function returned a non-2xx status code', error: 'Edge Function returned a non-2xx status code'}
console.error @ errorHandler.ts:69
sendBulkMessages @ edgeFunctionService.ts:214
errorHandler.ts:69 ❌ Erro no edgeFunctionService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object.sendBulkMessages (edgeFunctionService.ts:228:15)
    at async Object.sendBulkMessages (messageService.ts:64:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:356:9)
console.error @ errorHandler.ts:69
sendBulkMessages @ edgeFunctionService.ts:243
errorHandler.ts:69 ❌ Erro no messageService.sendBulkMessages: Error: Edge Function returned a non-2xx status code
    at Object.sendBulkMessages (edgeFunctionService.ts:228:15)
    at async Object.sendBulkMessages (messageService.ts:64:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:356:9)
console.error @ errorHandler.ts:69
sendBulkMessages @ messageService.ts:90
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Erro ao enviar mensagens: Error: Edge Function returned a non-2xx status code
    at Object.sendBulkMessages (edgeFunctionService.ts:228:15)
    at async Object.sendBulkMessages (messageService.ts:64:22)
    at async handleSendMessages (ChargesDashboard.tsx:225:22)
    at async handleSendMessage (BulkMessageDialog.tsx:356:9)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:241
errorHandler.ts:69 ❌ [CHARGES-DASHBOARD] Stack trace: Error: Edge Function returned a non-2xx status code
    at Object.sendBulkMessages (http://localhost:8081/src/services/edgeFunctionService.ts?t=1759334825862:144:23)
    at async Object.sendBulkMessages (http://localhost:8081/src/services/messageService.ts?t=1759334825862:43:28)
    at async handleSendMessages (http://localhost:8081/src/components/charges/dashboard/ChargesDashboard.tsx?t=1759334825862:243:28)
    at async handleSendMessage (http://localhost:8081/src/components/charges/BulkMessageDialog.tsx?t=1759332826568:337:17)
console.error @ errorHandler.ts:69
handleSendMessages @ ChargesDashboard.tsx:242
ChargesDashboard.tsx:250 🏁 [CHARGES-DASHBOARD] Finalizando processo de envio
BulkMessageDialog.tsx:357 ✅ [BULK-MESSAGE-DIALOG] onSendMessages (custom) executado com sucesso
BulkMessageDialog.tsx:360 🎉 [BULK-MESSAGE-DIALOG] Processo concluído, fechando diálogo
BulkMessageDialog.tsx:374 🏁 [BULK-MESSAGE-DIALOG] Finalizando handleSendMessage
logThrottle.ts:28 🔍 [DEBUG] 🔍 [TENANT ACCESS GUARD] Verificando acesso: (repetido 24x) {currentTenant: {…}, userRole: 'ADMIN', requiredRole: undefined, hasCurrentTenant: true, isTenantActive: true, …}
logThrottle.ts:28 🔍 [DEBUG] useSecureTenantQuery - Tenant: jaturat (repetido 6x) {tenantId: '795b056c-6e95-473f-9c59-b5f4eab973c8', tenantName: 'jaturat', isValidTenant: true, queryKeyLength: 3, enabled: true}
